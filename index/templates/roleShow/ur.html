{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户</title>
     <style>
   body {
            font-family: Arial, sans-serif;
            background-image: url({% static 'img/bk2.png' %});
            background-size: cover; /* 让背景图片充满整个屏幕 */
            background-repeat: no-repeat; /* 防止背景图片重复 */
        }
        .image-container {
    position: relative;
    display: inline-block;
}

.image-upload-label {
    display: block;
    position: relative;
    cursor: pointer;
}

.image-upload-label img {
    max-width: 50%;
    height: auto;
    border-radius: 50%;
    margin-bottom: 10px;
}

.image-upload-label span {
    position: absolute;
    bottom: 5px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 14px;
    display: none;
}

.image-upload-label:hover span {
    display: block;
}

/* 隐藏 input[type="file"] */
input[type="file"] {
    display: none;
}
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
        }

        .info-item {
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
        }

        input[type="text"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            pointer-events: none; /* 默认状态下禁止点击 */
        }
        select#education {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            pointer-events: none; /* 默认状态下禁止点击 */
            appearance: none; /* 去除默认样式 */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E"); /* 使用自定义下拉箭头 */
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
        }

        img {
            max-width: 50%;
            height: auto;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .edit-button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .save-button {
            background-color: #28a745;
        }

        .cancel-button {
            background-color: #dc3545;
        }
        .resume-textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: vertical; /* 允许垂直拖动调整大小 */
        }

        /* 添加样式用于装饰 */
        .decoration {
            margin-top: 20px;
            border-top: 1px solid #ccc;
            padding-top: 20px;
        }
        .centered-form {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 999;
        }

        .centered-form h2 {
            margin-top: 0;
            text-align: center;
            color: #333;
        }

        .centered-form label {
            display: block;
            margin-bottom: 10px;
        }

        .centered-form input[type="password"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .centered-form .edit-button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .centered-form .edit-button.cancel-button {
            background-color: #dc3545;
        }

        .centered-form .edit-button.confirm-button {
            background-color: #28a745;
        }
    </style>
</head>
<body>
 <div class="container">
        <h1>求职者信息</h1>
        <div class="image-container">
    <label for="file-upload" class="image-upload-label">
        <img class="resized-image" src="data:image/png;base64,{{ image_data }}" alt="Resi   zed Image">
    </label>
</div>
        <div class="info-item">
            <label for="user-id">用户账号:</label>
            <input type="text" id="user-id" readonly>
        </div>
        <div class="info-item">
            <label for="phone">手机号码:</label>
            <input type="text" id="phone" readonly>
        </div>
        <div class="info-item">
            <label for="location">所在地址:</label>
            <input type="text" id="location" readonly>
        </div>
        <div class="info-item">
    <label for="education">最高学历:</label>
    <select id="education">
        <option value="junior">初中</option>
        <option value="highschool">高中</option>
        <option value="secondary">中专</option>
        <option value="associate">大专</option>
        <option value="bachelor" >本科</option>
        <option value="master">硕士</option>
        <option value="doctorate">博士</option>
        <option value="none">无</option>
    </select>
</div>
        <div class="info-item">
            <label for="experience">工作经验:</label>
            <input type="text" id="experience" readonly>
        </div>
        <div class="info-item">
            <label for="age">年龄:</label>
            <input type="text" id="age" readonly>
        </div>
        <div class="info-item">
            <label for="name">姓名:</label>
            <input type="text" id="name" readonly>
        </div>
        <div class="info-item">
            <label for="gender">性别:</label>
            <input type="text" id="gender" readonly>
        </div>
        {% csrf_token %}

        <div id="resume-editor" class="resume_ed" style="display: block;">
    <div class="resume-item">
        <label for="resume-1">介绍:</label>
        <textarea class="resume-textarea" id="resume-1" placeholder="简历1"></textarea>
    </div>
    <div class="resume-item">
        <label for="resume-2">优势:</label>
        <textarea class="resume-textarea" id="resume-2" placeholder="简历2"></textarea>
    </div>
    <div class="resume-item">
        <label for="resume-3">期望:</label>
        <textarea class="resume-textarea" id="resume-3" placeholder="简历3"></textarea>
    </div>
            <div class="education-table">
        <h2>教育经历</h2>
        <table id="education-table">
            <thead>
                <tr>
                    <th>      </th>
                    <th>学校</th>
                    <th>学校类型</th>
                    <th>学位</th>
                    <th>专业</th>
                    <th>毕业年份</th>
                    <th>      </th>

                </tr>
            </thead>
            <tbody id="education-table-body">
                <!-- 这里将用JavaScript来填充表格 -->
            </tbody>
        </table>

    </div>


</div>

        </div>
<script>
    var schoolList=[]
    {% for sch in school %}
        schoolList.push({schoolid:'{{ sch.schoolid }}',schoolLogo: '{{ sch.schoolLogo }}',schoolname:'{{ sch.schoolname }}',type:'{{ sch.schooltype }}'})
    {% endfor %}
        let blank=document.getElementById('user-id')
        blank.value='{{ userid }}'
        blank=document.getElementById('phone')
        blank.value='{{ telephone }}'
        blank=document.getElementById('location')
        blank.value='{{ Raddress }}'
        blank=document.getElementById('experience')
        blank.value='{{ experience }}'
        blank=document.getElementById('age')
        blank.value='{{ age }}'
        blank=document.getElementById('name')
        blank.value='{{ name }}'
        blank=document.getElementById('gender')
        blank.value='{{ sex }}'
        blank=document.getElementById('education')


switch ('{{ highestEdu }}') {

  case "高中":
    blank.value = 'highschool';
    break;
  case "初中":
    blank.value = 'junior';
    break;

  case "中专":
    blank.value = 'secondary';
    break;
  case "大专":
    blank.value = 'associate';
    break;
  case "本科":
    blank.value = 'bachelor';
    break;
  case "硕士":
    blank.value = 'master';
    break;
  case "博士":
    blank.value = 'doctorate';
    break;
  case "无":
    blank.value = 'none';
    break;
  default:
    console.log("未知教育水平");
}
        function editResume() {


    // 加载简历内容
    var resume1 = document.getElementById('resume-1')
    var resume2 = document.getElementById('resume-2')
    var resume3 = document.getElementById('resume-3')
    var resume = [resume1, resume2, resume3]
    var reslst = []
    {% for res in resume %}
        reslst.push('{{ res }}')
    {% endfor %}
    for (let i = 0; i < {{ lengths }}; i++) {
        resume[i].value = reslst[i]
        resume[i].setAttribute('readonly', 'readonly');
    }
    getEducationData();
}

function getEducationData() {
    // 这里假设 educationData 是从后端获取的教育经历数据，格式为 [{}, {}, ...]
    // 每个对象包含学校校徽、学校、学位、专业和毕业年份等信息
    var educationData=[]
    if({{ lengths_of_education_experience }}==0){
    return;
    }

{#schoolname,schoolLogo,schooltype,degree,major,finashdate#}
    {% for edu in education_experience %}
        educationData.push({schoolLogo:'{{ edu.schoolLogo }}',school:'{{ edu.schoolname }}',schooltype:'{{ edu.schooltype }}',degree:'{{ edu.degree }}',major:'{{ edu.major }}',graduationYear:'{{ edu.finishdate }}'})
        console.log('{{ edu.finishdate }}')
    {% endfor %}

    // 获取表格的 tbody 元素
    var educationTableBody = document.getElementById('education-table-body');

    // 清空表格内容
    educationTableBody.innerHTML = '';

    // 循环遍历教育经历数据，为表格添加行和单元格
    educationData.forEach(function(education) {
        var row = document.createElement('tr');

        // 创建并填充单元格
        var schoolLogoCell = document.createElement('td');
        var schoolLogoImg = document.createElement('img');
        schoolLogoImg.alt = "Binary Image";
        schoolLogoImg.src = 'data:image/png;base64,' + education.schoolLogo;
        schoolLogoCell.appendChild(schoolLogoImg);
        row.appendChild(schoolLogoCell);

        var schoolCell = document.createElement('td');
        schoolCell.textContent = education.school;
        row.appendChild(schoolCell);

        var schoolType = document.createElement('td');
        schoolType.textContent = education.schooltype;
        row.appendChild(schoolType);

        var degreeCell = document.createElement('td');
        degreeCell.textContent = education.degree;
        row.appendChild(degreeCell);

        var majorCell = document.createElement('td');
        majorCell.textContent = education.major;
        row.appendChild(majorCell);

        var graduationYearCell = document.createElement('td');
        graduationYearCell.textContent = education.graduationYear;
        row.appendChild(graduationYearCell);


        // 将行添加到表格中
        educationTableBody.appendChild(row);
    });
}
    editResume()

</script>

</body>
</html>